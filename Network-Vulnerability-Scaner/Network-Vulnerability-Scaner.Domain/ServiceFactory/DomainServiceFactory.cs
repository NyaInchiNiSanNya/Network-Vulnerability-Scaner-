using AutoMapper;
using Microsoft.Extensions.DependencyInjection;
using Network_Vulnerability_Scaner.Domain.Interfaces;
using Network_Vulnerability_Scaner.Domain.Interfaces.Internal;

namespace Network_Vulnerability_Scaner.Application.ServiceFactory
{   
    internal class DomainServiceFactory : IDomainServiceFactory
    {
        private readonly IServiceProvider _serviceProvider;

        public DomainServiceFactory(IServiceProvider serviceProvider)
        {
            _serviceProvider = serviceProvider;
        }

        INmapScanningService IDomainServiceFactory.CreateNmapScanningService()
        {
            return _serviceProvider.GetService<INmapScanningService>()
                   ?? throw new NullReferenceException(nameof(INmapScanningService));
        }

        IReportReaderService IDomainServiceFactory.CreateReportReaderService()
        {
            return _serviceProvider.GetService<IReportReaderService>()
                   ?? throw new NullReferenceException(nameof(IReportReaderService));
        }

        IGetNmapScanStringService IDomainServiceFactory.CreateGetNmapScanStringService()
        {
            return _serviceProvider.GetService<IGetNmapScanStringService>()
                   ?? throw new NullReferenceException(nameof(IGetNmapScanStringService));
        }
    }
}
