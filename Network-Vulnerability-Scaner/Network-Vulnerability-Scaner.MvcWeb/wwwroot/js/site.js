document.addEventListener('DOMContentLoaded', function () {

    var vulnRequestElements = document.querySelectorAll('#vulnRequest');

    vulnRequestElements.forEach(function (element) {
        element.addEventListener('click', function (event) {
            GetVulnsByPortAsync(event);
        });
    });
});

async function GetVulnsByPortAsync(event)
{
        var version = event.target.getAttribute("version");

        var service = event.target.getAttribute("service");

        var portData = {
            version: version,
            service: service
        };

        var resp = await fetch('https://localhost:7143/Scan/GetPortVulnerability', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(portData)
        });

        vulns = await resp.text();

        document.getElementById("leftBack").hidden = true;

        document.getElementById("workplaceL").hidden = false;

        document.getElementById("workPlaceLeftTop").innerHTML = vulns;


    }
